## ChaosMonkeyPod
Application that runs within a Kubernetes cluster and interacts with the Kubernetes API server (details in docs/exercise.pdf).
Proposed solution test the resilience of workloads by sending HTTP requests to perform the following actions:
* Delete a random POD into namespace "testing"
* Delete pods only if they have a specific label into target namespace
* Get pod name found into target namespace

# Project Organization:
* ChaosMonkeyPod
*	src: 		source files
*	kube: 		manifests files for "ChaosMonkeyPod" application and "dummy workloads" (nginx images) in "testing" namespace. 
*   docs:		test document
*	Dockerfile: build Docker images
*	clean.sh:	clean script (start locally docker desktop and minikube BEFORE run)
*	start.sh:	start script (start locally docker desktop and minikube BEFORE run)
*	pom.xml
*	README

# Technologies
* [JDK v1.8.X] - Java Runtime
* [Spring Boot 2.6.7] - backend
* [Kubernetes Java Client v.17.0.1] - backend - Java client for the kubernetes API
* [Minikube v1.29.0] - Maker for local single-node Kubernetes cluster

## Getting Started

# Prerequisites
Needs to install and run application:
* JDK v1.8.X
* Maven v.3.3.9
* Docker Desktop v4.13.0
* Minikube v1.29.0


# Installation and Deployment on Kubernetes cluster:
Steps:
* 1- Generate Spring Boot fat-Jar: RUN "mvn clean package" from inside root folder
* 2- Build Docker images from Dockerfile: RUN "docker build -t chaos-monkey-pod ." from inside root folder
* 3- Start Docker Desktop
* 4- Start Minikube: RUN "minikube start"
* 5- Deploy "ChaosMonkeyPod" and "dummy workloads" Kubernetes resources: RUN "kubectl apply -f kube"
* 6- Expose service to the internet (via LoadBalancer service). RUN "minikube tunnel" 
*    NOTE: If service is not reachable then try to forward HTTP traffic from LOCAL machine to the service running in the cluster: RUN "kubectl port-forward service/chaos-monkey-pod [exposed_host_port]:[exposed_service_port] -n demo"


## Test
cURL for HTTP requests:
* Delete a random POD into namespace "testing"
* curl --location --request DELETE 'http://[host]:[exposed_host_port]/pods/random?namespace=testing'

* Delete PODs by label selected into namespace "testing"
* curl --location --request DELETE 'http://[host]:[exposed_host_port]/pods/bylabel?label=[selector_label]&namespace=testing'

* Get PODs list into namespace "testing"
* curl --location --request GET 'http://[host]:[exposed_host_port]/pods/print?namespace=demo'

Utilities:
* Show Kubernetes deployed resources
* kubectl get all -n [target_namespace]
* kubectl get [nodes|deployments|services|pods] -n [target_namespace]

* Get details about Kubernetes deployed resources
* kubectl describe deployments

* Log generated by process running into container
* kubectl logs [pod_name] -n [target_namespace]

## NOTE:
Application was developed and tested on Microsoft Windows 11 Pro OS.
